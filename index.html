<!DOCTYPE html>
<html>
  <head>
    <meta name="title" content="小娜同学" />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://cdn.jsdelivr.net/gh/sun0225SUN/photos/img/20210715233345.png"
    />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <style type="text/css">
      @font-face {
        font-family: digit;
        src: url("digital.ttf") format("truetype");
      }
    </style>
    <link href="css/default.css" type="text/css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/garden.js"></script>
    <script type="text/javascript" src="js/functions.js"></script>
  </head>

  <body>
    <div id="mainDiv">
      <div id="content">
        <div id="code">
          <span class="comments">##</span><br />
          <span class="comments"># I am a programmer,</span><br />
          <span class="comments"
            ># so I write code to celebrate Valentine's Day in coder's
            way.</span
          ><br />
          <span class="comments">##</span><br />
          i = Boy(<span class="string">"畅"</span>);<br />
          u = Girl(<span class="string">"娜"</span>);<br />
          <span class="comments"
            ># 29 10, 2020, I meet you because of Badminton Club activities. </span
          ><br />
          i.meet(u)<br />
          <span class="comments"
            ># Afterwards, You linger in my mind, impossible to shake off. </span
          ><br />
          i.obsessed(u)<br />
          <span class="comments"
            ># 8 5, 2022, We had our last meeting at Wuhan Polytechnic
            College.</span
          ><br />
          separation(u, i)<br />
          <span class="comments"># Later, We argued many times.</span><br />
          conflict(u, i)<br />
          <span class="comments"
            ># Fortunately, We chose each other, and never walked away.</span
          ><br />
          lucky(u, i)<br />
          <span class="comments"
            ># Sometimes there are a few conflicts between us.</span
          ><br />
          conflict(u, i, sometimes=<span class="keyword">True</span>)<br />
          <span class="comments"
            ># But we are getting more and more in harmony together.</span
          ><br />
          u.in_harmony_with(i) <br />
          i.in_harmony_with(u) <br />
          <span class="comments"># You are the greatest love of my life.</span
          ><br />
          while <span class="keyword">True</span>:<br />
          <span class="placeholder"></span
          ><span class="keyword">if</span> u.with(i):<br />
          <span class="placeholder"></span><span class="placeholder"></span>u =
          everything<br />
          <span class="placeholder"></span
          ><span class="keyword">else</span>:<br />
          <span class="placeholder"></span
          ><span class="placeholder"></span>everything = u<br />
          <span class="comments"
            ># Nana, my lady, may I be the one by your side, today and
            always?</span
          >
          <span class="comments"
            ># Whenever you are ready to answer, my heart will be right
            here.</span
          >
          <button id="startLoveBtn" class="comments">
            Let our love begin here
          </button>
        </div>
        <div id="loveHeart">
          <canvas id="garden"></canvas>
          <div id="words">
            <div id="messages">
              From this moment, our love story unfolds
              <div id="elapseClock"></div>
            </div>
            <div id="loveu">
              Love u forever and ever.<br />
              <div class="signature"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      var offsetX = $("#loveHeart").width() / 2;
      var offsetY = $("#loveHeart").height() / 2 - 55;
      // var together = new Date();
      // // 此处月份介于 0 ~ 11 之间。用本地时间表示，如 8 月要用 7 表示。
      // together.setFullYear(2026, 0, 6);
      // together.setHours(0);
      // together.setMinutes(0);
      // together.setSeconds(0);
      // together.setMilliseconds(0);
      window.addEventListener("click", () => {
        console.log("window点击触发掉落花瓣");
        // startPetalFall(function () {
        //   console.log("花瓣全部掉落完毕，开始打字机效果");
        //   $("#code").typewriter(); // 打字机
        //   setTimeout(startHeartAnimation, 1000); // 花瓣重新生长
        // });
        fall()
      });

      $("#startLoveBtn").one("click", function () {
        // 1️⃣ 显示计时区域（关键）
        shwoMessage();

        // 2️⃣ 记录在一起的第一秒
        together = new Date();

        // 3️⃣ 立刻显示 0 秒
        timeElapse(together);

        // 4️⃣ 实时计时
        loveTimer = setInterval(function () {
          timeElapse(together);
        }, 500);

        // 5️⃣ 按钮状态变化
        $(this).text("Our time has begun ❤️");
        $(this).prop("disabled", true);
        $(this).css({
          cursor: "default",
          opacity: 0.8,
        });
      });
      if (!document.createElement("canvas").getContext) {
        var msg = document.createElement("div");
        msg.id = "errorMsg";
        msg.innerHTML =
          "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+";
        document.body.appendChild(msg);
        $("#code").css("display", "none");
        $("#copyright").css("position", "absolute");
        $("#copyright").css("bottom", "10px");
        document.execCommand("stop");
      } else {
        startHeartAnimation();
        adjustCodePosition();
        // $("#code").typewriter();
      }
    </script>
  </body>
</html>
